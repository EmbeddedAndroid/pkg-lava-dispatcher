#!/usr/bin/python
import json
from dispatcher import run_job
import sys

def usage(status):
    print >> sys.stderr, "Usage:\n    lava-dispatch <json job file>"
    sys.exit(status)

if len(sys.argv) != 2:
    usage(1)

if sys.argv[1] == "--help":
    usage(0)

with open(sys.argv[1]) as fd:
    jobdata = json.loads(fd.read())

run_job(jobdata)
